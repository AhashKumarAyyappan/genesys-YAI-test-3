<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAI</title>

</head>

<body>
    <div>
        <h1>YAI</h1>
        <table>
            <tr>
                <td>
                    <h2>Customer Mobile No:</h2>
                </td>
                <td>
                    <input id="customerNumber" style="width: 300px; height: 20px;" type="number">
                </td>
            </tr>
            <!-- <tr>
                <td>
                    <h2>Agent Name:</h2>
                </td>
                <td>
                    <input id="agentname" style="width: 300px; height: 20px;" type="text">
                </td> -->
            </tr>

            <!-- <tr>
                <td>
                 
                </td>
            </tr> -->
        </table>
        <button onclick="result()" id="sub" style="width: 100px; height: 40px;" type="submit">Submit</button>
        <button onclick="reset()" id="sub" style="width: 100px; height: 40px;" type="reset">Reset</button>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.js"></script>
        <script src="./index.js"></script>
        <script>
            var num = document.getElementById("customerNumber")
            // var aname = document.getElementById("agentname")
            var butn = document.getElementById("sub")


            function result() {

                // if (aname.value == "" || num.value == "" || num.value == "null" || aname.value == "null") {
                //     alert("Type the values and click submit")
                //     window.location.reload();
                // }

                // console.log(aname.value)
                console.log(num.value)
                // window.parent.postMessage(
                //     JSON.stringify({
                //         "event_code": "ym-client-event",
                //         "data": {
                //             "cusNo" : num.value,
                //             "agentName" : aname.value
                //         }
                //     }),)

                // const axios = require('axios');
                // let data = JSON.stringify({
                //     //  "sender": num.value,
                //     "data": {
                //         "cusNo": num.value,
                //         // "agentName": aname.value
                //     }
                // });

               // const axios = require('axios');
              let val = JSON.stringify(num.value)
                let data = JSON.stringify({
                    "botId": "x1713349981681",
                    "sender": "asfasv",
                    "data": {
                        "message": "hi",
                        "event": {
                            "code": "data-from-genesys",
                            "data": {
                                "number": val
                            }
                        }
                    }
                });

                let config = {
                    method: 'post',
                    maxBodyLength: Infinity,
                    url: 'https://cloud.yellow.ai/integrations/sync/v1/message',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'x-api-key': 'ySj09lZvN4o6K1Xl1WYeBHVQtlvIMe5J2N6M9dU-'
                    },
                    data: data
                };

                axios.request(config)
                    .then((response) => {
                        console.log(JSON.stringify(response.data));
                    })
                    .catch((error) => {
                        console.log(error);
                    });




            }

            function reset() {
                window.location.reload();
            }
        </script>
    </div>
</body>

</html>
